<Window x:Class="WTF_DICOM.TagsAndValuesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WTF_DICOM"
        xmlns:models="clr-namespace:WTF_DICOM.Models"
        d:DataContext="{d:DesignInstance Type=models:WTFDicomDataset}"
        mc:Ignorable="d"
        Title="TagsAndValuesWindow" Height="580" Width="800">
  <Grid>
    <Grid.RowDefinitions>
      <!--Menu-->
      <RowDefinition Height="auto" />
      <!--Toolbar/Searchbar-->
      <RowDefinition Height="auto" />
      <!--Header-->
      <RowDefinition Height="auto" />
      <!--Content-->
      <RowDefinition Height="560" />
      <!--Margin-->
      <RowDefinition Height="1" />
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="2" Orientation="Horizontal">
      <Button Command="{Binding FirstCommand}" Content="first" />
      <Button Command="{Binding Minus5Command}" Content="-5" />
      <Button Command="{Binding Minus1Command}" Content="-1" />
      <Button Command="{Binding Plus1Command}" Content="+1" />
      <Button Command="{Binding Plus5Command}" Content="+5" />
      <Button Command="{Binding LastCommand}" Content="last" />

      <StackPanel.Style>
        <Style TargetType="{x:Type StackPanel}">
          <Setter Property="Visibility" Value="Visible"/>
          <Style.Triggers>
            <DataTrigger Binding="{Binding IsSequence}" Value="False">
              <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
          </Style.Triggers>
        </Style>
      </StackPanel.Style>
      
    </StackPanel>

    <!--Content - List of tags and values-->
    <DataGrid Grid.Row="3"
              ItemsSource="{Binding TagsAndValuesList}"
              x:Name="TagsAndValuesDataGrid"
              AutoGenerateColumns="False"
              VerticalScrollBarVisibility="Visible"
              HorizontalScrollBarVisibility="Visible"
              IsReadOnly="True"
              SelectionMode="Single" SelectionUnit="Cell"
              AlternationCount="2" AlternatingRowBackground="DarkViolet">
      <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding TagAsString}" Header="Dicom Tag {Group, Element}" />
        <DataGridTextColumn Binding="{Binding TagInWords}" Header="Dicom Tag Name" />
        <DataGridTextColumn Binding="{Binding ValueOfTagAsString}" Header="Value" />
      </DataGrid.Columns>

      <DataGrid.ContextMenu>
        <ContextMenu>
          <MenuItem Header="Copy Cell To Clipboard"
                    Command="{Binding CopyToClipboardCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ContextMenu}}, Path=PlacementTarget.SelectedCells[0].Item}" />
          <MenuItem Header="Show Referenced Files"
                    Command="{Binding ShowReferencedFilesCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ContextMenu}}, Path=PlacementTarget.SelectedCells[0].Item}" />
          <MenuItem Header="Show Sequence"
                    Command="{Binding ShowSequenceCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ContextMenu}}, Path=PlacementTarget.SelectedCells[0].Item}" />
          <MenuItem Header="Add Tag to Display"
                    Command="{Binding AddTagToDisplayCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ContextMenu}}, Path=PlacementTarget.SelectedCells[0].Item}" />
        </ContextMenu>
      </DataGrid.ContextMenu>

      <DataGrid.CellStyle>
        <Style TargetType="{x:Type DataGridCell}">
          <EventSetter Event="GotFocus" Handler="CellClick"/>
        </Style>
      </DataGrid.CellStyle>

    </DataGrid>

  </Grid>
</Window>
